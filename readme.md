#### Процесс генерации токена

Каждому пользователю, при первом посещении, усталавливается cookie с уникальным идентификатором(CUID), на максимальное время.

CUID сохраняется в базе данных, и соответствует одному уникальному Клиенту-Браузеру.

При открытии формы, создается сессия Форма-Клиент с выдачей уникального ключа - FormToken, который имеет ограниченное время жизни(например 20 мин.).

В каждой форме имеются скрытые поля:
- CUID
- FormToken

...на случай, если у клиента в браузере отключено использование cookie.


#### Способы аутентификации/регистрации

Предусмотрено два способа аутентификации/регистрации:
1. с использованием виджета и javascript
2. прямая адресация на сервер аутентификации


#### 1. Виджет(javascript)

Виджет представляет из себя iframe, внутри которого загружается форма с кнопками "Авторизация" и "Регистрация". Для работы виджета, требуется поддержка javascript в браузере клиента.

По нажатию на одну из кнопок, открывается новое окно (отцентрированное по центру экрана), в котром содержится форма. При отправлении формы, происходит проверка и переадресация на страницу обратного вызова партнерского сайта(того, на котором размещен виджет). На странице обратного вызова находится код javascript, который перезагружает основную страницу сайта и закрывает окно с формой. Если все прошло успешно, то после перезагрузки основной страницы, пользователь будет уже авторизован.


#### 2. Прямая ссылка

Для использования прямых ссылок на формы, не требуется поддержка javascript. При переходе по ссылке, открывается страница безопасного паспорт-сервера, на котором клиент заполняет форму. После отправки формы, происходит ее обработка, и последующая переадресация на сайт партнера.


#### Обработка ошибок формы


#### Межсерверное взаимодействие паспорт-сервера и партнерского сервера
